{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Business\\\\Wabi\\\\FSD-A2\\\\admin\\\\src\\\\pages\\\\users.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from \"react\";\nimport gql from \"graphql-tag\";\nimport { useMutation, useQuery } from \"@apollo/client\";\nimport MessageContext from \"../contexts/AdminContext.js\";\nimport client from \"../apollo/client.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Users() {\n  _s();\n\n  const {\n    setMessage\n  } = useContext(MessageContext);\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(GET_USERS);\n  const [blockUnblockUser] = useMutation(BLOCK_UNBLOCK_USER);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Error loading users\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 21\n  }, this);\n\n  const handleBlockUnblock = async (userId, block) => {\n    try {\n      await blockUnblockUser({\n        variables: {\n          userId,\n          block\n        }\n      });\n      setMessage( /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"User with \", /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"ID \", userId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 30\n        }, this), \" has been \", block ? \"blocked\" : \"unblocked\", \".\"]\n      }, void 0, true));\n      refetch(); // Refresh the user list after blocking/unblocking\n    } catch (err) {\n      console.error(\"Error blocking/unblocking user:\", err);\n      setMessage( /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-danger\",\n        children: \"Error blocking/unblocking user\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 18\n      }, this));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: data.users.length === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-muted\",\n        children: \"No users found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this) : data.users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border my-3 p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", user.blocked ? \"Blocked\" : \"Active\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn ${user.blocked ? \"btn-success\" : \"btn-danger\"}`,\n          onClick: () => handleBlockUnblock(user.id, !user.blocked),\n          children: user.blocked ? \"Unblock\" : \"Block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 15\n        }, this)]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Users, \"ojdMiBQJqeZMHAhge4OrV00CjsY=\", false, function () {\n  return [useQuery, useMutation];\n});\n\n_c = Users;\n\nvar _c;\n\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useContext","useEffect","gql","useMutation","useQuery","MessageContext","client","Users","setMessage","loading","error","data","refetch","GET_USERS","blockUnblockUser","BLOCK_UNBLOCK_USER","handleBlockUnblock","userId","block","variables","err","console","users","length","map","user","username","blocked","id"],"sources":["C:/xampp/htdocs/Business/Wabi/FSD-A2/admin/src/pages/users.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport gql from \"graphql-tag\";\r\nimport { useMutation, useQuery } from \"@apollo/client\";\r\nimport MessageContext from \"../contexts/AdminContext.js\";\r\nimport client from \"../apollo/client.js\";\r\n\r\n\r\n\r\n\r\nexport default function Users() {\r\n  const { setMessage } = useContext(MessageContext);\r\n  const { loading, error, data, refetch } = useQuery(GET_USERS);\r\n  const [blockUnblockUser] = useMutation(BLOCK_UNBLOCK_USER);\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p>Error loading users</p>;\r\n\r\n  const handleBlockUnblock = async (userId, block) => {\r\n    try {\r\n      await blockUnblockUser({ variables: { userId, block } });\r\n      setMessage(<>User with <strong>ID {userId}</strong> has been {block ? \"blocked\" : \"unblocked\"}.</>);\r\n      refetch(); // Refresh the user list after blocking/unblocking\r\n    } catch (err) {\r\n      console.error(\"Error blocking/unblocking user:\", err);\r\n      setMessage(<span className=\"text-danger\">Error blocking/unblocking user</span>);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Users</h1>\r\n      <div>\r\n        {data.users.length === 0 ?\r\n          <span className=\"text-muted\">No users found.</span>\r\n          :\r\n          data.users.map((user) =>\r\n            <div key={user.id} className=\"border my-3 p-3\">\r\n              <p>{user.username}</p>\r\n              <p>Status: {user.blocked ? \"Blocked\" : \"Active\"}</p>\r\n              <button\r\n                className={`btn ${user.blocked ? \"btn-success\" : \"btn-danger\"}`}\r\n                onClick={() => handleBlockUnblock(user.id, !user.blocked)}\r\n              >\r\n                {user.blocked ? \"Unblock\" : \"Block\"}\r\n              </button>\r\n            </div>\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,gBAAtC;AACA,OAAOC,cAAP,MAA2B,6BAA3B;AACA,OAAOC,MAAP,MAAmB,qBAAnB;;;AAKA,eAAe,SAASC,KAAT,GAAiB;EAAA;;EAC9B,MAAM;IAAEC;EAAF,IAAiBR,UAAU,CAACK,cAAD,CAAjC;EACA,MAAM;IAAEI,OAAF;IAAWC,KAAX;IAAkBC,IAAlB;IAAwBC;EAAxB,IAAoCR,QAAQ,CAACS,SAAD,CAAlD;EACA,MAAM,CAACC,gBAAD,IAAqBX,WAAW,CAACY,kBAAD,CAAtC;EAEA,IAAIN,OAAJ,EAAa,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;EACb,IAAIC,KAAJ,EAAW,oBAAO;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAAP;;EAEX,MAAMM,kBAAkB,GAAG,OAAOC,MAAP,EAAeC,KAAf,KAAyB;IAClD,IAAI;MACF,MAAMJ,gBAAgB,CAAC;QAAEK,SAAS,EAAE;UAAEF,MAAF;UAAUC;QAAV;MAAb,CAAD,CAAtB;MACAV,UAAU,eAAC;QAAA,sCAAY;UAAA,kBAAYS,MAAZ;QAAA;UAAA;UAAA;UAAA;QAAA,QAAZ,gBAAmDC,KAAK,GAAG,SAAH,GAAe,WAAvE;MAAA,gBAAD,CAAV;MACAN,OAAO,GAHL,CAGS;IACZ,CAJD,CAIE,OAAOQ,GAAP,EAAY;MACZC,OAAO,CAACX,KAAR,CAAc,iCAAd,EAAiDU,GAAjD;MACAZ,UAAU,eAAC;QAAM,SAAS,EAAC,aAAhB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAD,CAAV;IACD;EACF,CATD;;EAWA,oBACE;IAAA,wBACE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAA,UACGG,IAAI,CAACW,KAAL,CAAWC,MAAX,KAAsB,CAAtB,gBACC;QAAM,SAAS,EAAC,YAAhB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADD,GAGCZ,IAAI,CAACW,KAAL,CAAWE,GAAX,CAAgBC,IAAD,iBACb;QAAmB,SAAS,EAAC,iBAA7B;QAAA,wBACE;UAAA,UAAIA,IAAI,CAACC;QAAT;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAA,uBAAYD,IAAI,CAACE,OAAL,GAAe,SAAf,GAA2B,QAAvC;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF,eAGE;UACE,SAAS,EAAG,OAAMF,IAAI,CAACE,OAAL,GAAe,aAAf,GAA+B,YAAa,EADhE;UAEE,OAAO,EAAE,MAAMX,kBAAkB,CAACS,IAAI,CAACG,EAAN,EAAU,CAACH,IAAI,CAACE,OAAhB,CAFnC;UAAA,UAIGF,IAAI,CAACE,OAAL,GAAe,SAAf,GAA2B;QAJ9B;UAAA;UAAA;UAAA;QAAA,QAHF;MAAA,GAAUF,IAAI,CAACG,EAAf;QAAA;QAAA;QAAA;MAAA,QADF;IAJJ;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuBD;;GA1CuBrB,K;UAEoBH,Q,EACfD,W;;;KAHLI,K"},"metadata":{},"sourceType":"module"}